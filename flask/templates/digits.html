{% extends "layout.html" %}

{% block extrahead %}
    <script type="text/javascript" src="{{ url_for('static', filename='js/drawing.js') }}"></script>
{% endblock %}

{% block content %}
  <h1>Digit Recognizer</h1>
  <p> This project uses a Convolutional Neural Network programmed in Tensorflow to recognize a digit drawn in an HTML5 canvas.</p>
  <p> Give it a try by writing a numeric digit from 0-9, in the box below and click submit. 
      Note The first input will take a while as the machine learning server will need to spin up.</p>
  
  <div id="container">
    <canvas id="imageView" width="84" height="84" style="border: 1px solid #000">
      <p>Unfortunately, your browser isn't currently unsupported.</p>
    </canvas>
  </div>

  <! addEventListener on an ID instead of func inside tag>
  <button onclick="clearCanvas()">Erase</button>

  <button id="submitBtn" onclick="submitCanvas()">Submit</button>
  <p id="response"></p>
  <table id="topK">
    <tr>
      <td>Class</td> <td>Probability</td>
    </tr>
  </table>

  <p> The model was trained on batches of 100, for 20,000 iterations, resulting in a 97% accuracy. </p>
  <p> When I first was creating this, I found the accuracy was very poor. My guess would be the input from canvas tool did not look close enough to the training data.
      It is particulary bad at guessing 7's and 1's, which got distorted when drawing. </p>
  </p>
  <p> I tried to preprocess the data to look like the inputs, by centering, adding white space around the digit and rescaling the image, before creating the 784 dimensional vector.</p>
  <p> For instance this is what the input looks like:</p>
  <img id="moded" src="" style="border-style: solid;border-width: 3px; border-color: red;"/> 

  <p> This is what the infrastructure for this project looks like: </p>

{% endblock %}